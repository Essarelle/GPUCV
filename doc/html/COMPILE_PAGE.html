<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>GpuCV: Compiling GpuCV</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="twiki_style.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="COMPILE_PAGE">Compiling GpuCV </a></h1><dl class="user"><dt><b>Topics:</b></dt><dd><ul>
<li>
<a class="el" href="COMPILE_PAGE.html#COMPILE_GPUCV_SCT__GETCODE">Get source code</a> </li>
<li>
<a class="el" href="COMPILE_PAGE.html#COMPILE_GPUCV_SCT__BATCH">Batch-compiling</a> </li>
<li>
<a class="el" href="COMPILE_PAGE.html#COMPILE_GPUCV_SCT__MANUAL">Compile manualy</a> <ul>
<li>
<a class="el" href="COMPILE_PAGE.html#COMPILE_GPUCV_SCT__SUB1_WINDOWS">Compile with Microsoft Visual Studio</a> </li>
<li>
<a class="el" href="COMPILE_PAGE.html#COMPILE_GPUCV_SCT__SUB2_LINUX">Compile from LINUX Shell</a> </li>
<li>
<a class="el" href="COMPILE_PAGE.html#COMPILE_GPUCV_SCT__SUB3_ECLIPSE">Compile with Eclipse</a> </li>
<li>
<a class="el" href="COMPILE_PAGE.html#COMPILE_GPUCV_SCT__SUB4_KDevelop">Compile with KDevelop</a> </li>
</ul>
</li>
<li>
<a class="el" href="COMPILE_PAGE.html#COMPILE_GPUCV_SCT__TIPS">Improve compiling speed (under LINUX)</a> </li>
<li>
<a class="el" href="COMPILE_PAGE.html#COMPILE_GPUCV_SCT__DEPENDENCIES">Compiling dependencies</a> </li>
<li>
<a class="el" href="COMPILE_PAGE.html#COMPILE_GPUCV_SCT__PLUGINS">Compiling third-party plugins</a> </li>
<li>
<a class="el" href="group__FAQ__GRP.html#FAQ_COMPILE_GRP">Compiling FAQs</a> </li>
</ul>
</dd></dl>
<h2><a class="anchor" id="COMPILE_GPUCV_SCT__GETCODE">
Get source code</a></h2>
<p>GpuCV stable project can be downloaded from <a href="https://picoforge.int-evry.fr/cgi-bin/twiki/view/Gpucv/Web/WebHomeDownload">here</a>. <br/>
 <br/>
GpuCV latest source code and dependencies can be check out from the svn respository at: </p>
<table border="1" cellspacing="3" cellpadding="3">
<tr>
<td><p>Stable </p>
</td><td><div class="fragment"><pre class="fragment">        <span class="comment">//login: guest</span>
        <span class="comment">//password: guest</span>
        svn co svn+ssh:<span class="comment">//guest@picoforge.int-evry.fr/gpucv/trunk/gpucv gpucv_working_copy</span>
</pre></div>   </td></tr>
<tr>
<td><p>Experimental</p>
</td><td><div class="fragment"><pre class="fragment">        <span class="comment">//login: guest</span>
        <span class="comment">//password: guest</span>
        svn co svn+ssh:<span class="comment">//guest@picoforge.int-evry.fr/gpucv/experimental/trunk/gpucv gpucv_working_copy</span>
</pre></div>  </td></tr>
</table>
<dl class="note"><dt><b>Note:</b></dt><dd>Some external dependencies (ex: SugoiTools) will be checked out as well in ./gpucv/dependencies/ folder. </dd>
<dd>
Your SVN tool might ask you the password several times. </dd>
<dd>
If you need to customize some path, see section COMPILE_GPUCV_SCT__CUSTOMIZE or libraries.</dd></dl>
<h2><a class="anchor" id="COMPILE_GPUCV_SCT__BATCH">
Batch-compiling</a></h2>
<p>All platform targets can be quickly compiled using the Premake tool depending on your OS and compiling chain. The generated project files and solutions can be found in "./gpucv/build".</p>
<dl class="user"><dt><b>Compiling commands:</b></dt><dd><table border="1" width="600" cellspacing="3" cellpadding="3">
<tr>
<td><p>OS</p>
</td><td width="200"><p>Generate project files</p>
</td><td width="200"><p>Batch compile </p>
</td></tr>
<tr>
<td><p>MS Windows * </p>
</td><td><div class="fragment"><pre class="fragment"> premake4.exe vs2008 
</pre></div><p> or<br/>
</p>
<div class="fragment"><pre class="fragment"> premake4.exe vs2005 
</pre></div> </td><td><div class="fragment"><pre class="fragment"> premake4.exe --platform=x64 compile_vs2008 
</pre></div><p> or<br/>
 </p>
<div class="fragment"><pre class="fragment"> premake4.exe --platform=x64 compile_vs2005 
</pre></div>  </td></tr>
<tr>
<td><p>Linux </p>
</td><td><div class="fragment"><pre class="fragment"> ./premake4.linux gmake 
</pre></div> </td><td><div class="fragment"><pre class="fragment"> ./premake4.linux --platform=x64 compile_gmake 
</pre></div>  </td></tr>
<tr>
<td><p>MacOS X </p>
</td><td><div class="fragment"><pre class="fragment"> ... 
</pre></div> </td><td><div class="fragment"><pre class="fragment"> ... 
</pre></div>  </td></tr>
</table>
</dd></dl>
<dl class="user"><dt><b>Additional compiling options:</b></dt><dd><table border="1" width="600" cellspacing="3" cellpadding="3">
<tr>
<td><p>Flag</p>
</td><td width="600"><p>Description </p>
</td></tr>
<tr>
<td><p>'--verbose'</p>
</td><td><p>Output compiling log to console, otherwise log files will be generated in "./gpucv/tmp/" folder. </p>
</td></tr>
<tr>
<td><p>'--platform=[x32|x64]</p>
</td><td><p>Try to compile as x32 or x64 target, default is to compile both </p>
</td></tr>
<tr>
<td><p>'--help'</p>
</td><td><p>Print all available options </p>
</td></tr>
</table>
</dd></dl>
<h2><a class="anchor" id="COMPILE_GPUCV_SCT__MANUAL">
Compile manualy</a></h2>
<p>MS Visual Studio solutions and gnu Makefiles are available in the "./gpucv/build" folder for manual build.</p>
<h3><a class="anchor" id="COMPILE_GPUCV_SCT__SUB1_WINDOWS">
Compile with Microsoft Visual Studio</a></h3>
<ol>
<li>
Open the <b>"./gpucv/build/windows-vs20XX'/GpuCV.sln"</b> solution corresponding to your interface of development. </li>
<li>
Choose your target architecture/configuration and compile. </li>
<li>
To try a sample application, set the project <b>GPUCVConsole</b> as 'Start Up Project'. </li>
</ol>
<dl class="user"><dt><b>Compiling for x86_64 platforms using Visual Studio 2005 for brevity:</b></dt><dd>To compile for x86_64 platforms, you will need to perfoms some additional customization steps in Visual Sudio: <ol>
<li>
Open the corresponding 64vs2005 solution </li>
<li>
Open Menu "Buid-&gt;Configuration manager" and set "Active platform solution" to "new" and "x64", then close the dialog window. </li>
<li>
Select all project at once and right click to get their common properties </li>
<li>
In "Configuration Properties-&gt;General" set "Output directory" to "../../../bin/vs2005/" and "Intermediate Directory" to your prefered output path, ex: "c:\temp\build\gpucv\Debug\64vs2005\$(ParentName)" or "../../../Debug\64vs2005\$(ParentName)" </li>
</ol>
</dd></dl>
<dl class="note"><dt><b>Note:</b></dt><dd>You might also need to compile opencv in for x64 architecture, see <a class="el" href="COMPILE_PAGE.html#COMPILE_GPUCV_SCT__DEPENDENCIES__SUBSECT_OPENCV_VS">Compiling OpenCV 2.1 for Windows X64</a>.</dd></dl>
<h3><a class="anchor" id="COMPILE_GPUCV_SCT__SUB2_LINUX">
Compile from LINUX Shell</a></h3>
<ol>
<li>
Go into <b>./gpucv/</b> </li>
<li>
Compile, '-j' option can be used to speed up compiling on multiple cores: <div class="fragment"><pre class="fragment">                        export config=[debug32|release32|release64|debug64]
                        make -C build/linux-gmake/ [-j]
</pre></div>  </li>
</ol>
<h3><a class="anchor" id="COMPILE_GPUCV_SCT__SUB3_ECLIPSE">
Compile with Eclipse</a></h3>
<p>GpuCV project comes with an Eclipse solution file "./gpucv/.project". </p>
<ol>
<li>
Open Eclipse and choose/create your workspace. </li>
<li>
Import GpuCV project: <b>File-&gt;Import</b> <ul>
<li>
You have an existing working copy of GpuCV: Select <b>General-&gt;Existing Projects into Workspace</b>. Set local path.  </li>
<li>
You want to checkout from the svn repository: Select <b>Other-&gt;Checkout Projects from SVN</b>. Then <b>Create a new repository from location</b>. Give the SVN URL given in <a href="https://picoforge.int-evry.fr/cgi-bin/twiki/view/Gpucv/Web/WebHomeDownload#SVN_repositories">here</a> and follow steps.  </li>
</ul>
</li>
<li>
Open the C/C++ perspective. </li>
<li>
GpuCV supplies a set of make commands for every libs and programmes, open the <b>Make</b> window and go to "./build/linux-gmake/". </li>
</ol>
<h3><a class="anchor" id="COMPILE_GPUCV_SCT__SUB4_KDevelop">
Compile with KDevelop</a></h3>
<p>GpuCV project dos not come with KDevelop project. Here are the few step required to create one: </p>
<ol>
<li>
Checkout source code from SVN </li>
<li>
Open KDevelop and choose menu-&gt;Project-&gt;Import existing project: <ul>
<li>
Select your fresh checkout path </li>
<li>
Select project type </li>
<li>
Validate and select all source file type </li>
<li>
Validate and select paths "build", "include", "src" </li>
</ul>
</li>
<li>
Open menu-&gt;Poject-&gt;Project Options-&gt;Build options: <ul>
<li>
Set the build folder to "./build/linux-gmake/", you might use absolute path. </li>
<li>
Make: add environnement variable: "config=debug64". </li>
</ul>
</li>
<li>
Open menu-&gt;Poject-&gt;Project Options-&gt;Run options: <ul>
<li>
Select the executable to run. </li>
<li>
Set environnement variable LD_LIBRARY_PATH, see result of command: "./premake.x32.linux getpath" </li>
</ul>
</li>
<li>
Compile and run. </li>
</ol>
<h2><a class="anchor" id="COMPILE_GPUCV_SCT__TIPS">
Improve compiling speed (under LINUX)</a></h2>
<p>Some tools like <a href="http://distcc.samba.org/">distcc</a> or <a href="http://ccache.samba.org/">ccache</a> can help you to improve the compiling speed. Check them out. DISTCC_POTENTIAL_HOSTS=localhost laptop desktop ps3 yannouchka-desktop</p>
<dl class="user"><dt><b>ccache</b></dt><dd>-&gt;"ccache is a compiler cache. It acts as a caching pre-processor to C/C++ compilers, using the -E compiler switch and a hash to detect when a compilation can be satisfied from cache. This often results in a 5 to 10 times speedup in common compilations."</dd></dl>
<p><br/>
Simply export the environnement variable CXX such as: </p>
<div class="fragment"><pre class="fragment">export CXX=<span class="stringliteral">&quot;ccache g++&quot;</span>
</pre></div><dl class="user"><dt><b>distcc</b></dt><dd>-&gt;"distcc is a program to distribute builds of C, C++, Objective C or Objective C++ code across several machines on a network. distcc should always generate the same results as a local build, is simple to install and use, and is usually much faster than a local compile."</dd></dl>
<p><br/>
Simply export the environnement variable CXX such as: </p>
<div class="fragment"><pre class="fragment">export CXX=<span class="stringliteral">&quot;ccache distcc g++&quot;</span>
</pre></div><p> Then export the list of available server running distcc daemons: </p>
<div class="fragment"><pre class="fragment">export DISTCC_HOSTS=<span class="stringliteral">&quot;localhost desktop&quot;</span>
</pre></div><p> And run make with the number (locals + remotes) of concurrent threads used to compile: </p>
<div class="fragment"><pre class="fragment">make -j8
</pre></div><h2><a class="anchor" id="COMPILE_GPUCV_SCT__DEPENDENCIES">
Compiling dependencies</a></h2>
<p>Any dependencies properties such as: </p>
<ul>
<li>
Include paths </li>
<li>
Library paths </li>
<li>
Libraries to link with </li>
<li>
etc... </li>
</ul>
<p>...is defined in files located in "./gpucv/etc/Premake".</p>
<h3><a class="anchor" id="COMPILE_GPUCV_SCT__DEPENDENCIES__SUBSECT_OPENCV_VS">
Compiling OpenCV 2.1 for Windows X64</a></h3>
<p>OpenCV 2.1 is not supplied with x64 binary files, manual compiling is required. Follow this steps (more informations on <a href="http://opencv.willowgarage.com/wiki/InstallGuide" target="blank">OpenCV web page</a>: </p>
<div class="fragment"><pre class="fragment"><span class="comment">//First, download and setup &lt;a target=&quot;blank&quot; href=&quot;http://www.cmake.org/cmake/resources/software.html&quot;&gt;CMAKE&lt;/a&gt;.</span>
<span class="comment">//start the console</span>
Start menu-&gt;run-&gt;cmd.exe
<span class="comment">//go to your OpenCV folder, ex c:\program files\OpenCV2.1</span>
ex: cd <span class="stringliteral">&quot;c:\program files\OpenCV2.1&quot;</span>
mkdir opencv_x64
cd opencv_x64
cmake -D:CMAKE_BUILD_TYPE=RELEASE <span class="stringliteral">&quot;c:\program files\OpenCV2.1&quot;</span> -G <span class="stringliteral">&quot;Visual Studio 9 2008 Win64&quot;</span>
<span class="comment">//open the file .\release\OpenCV.sln with Visual Studio and build it as usual.</span>
<span class="comment">//then create new directory in OpenCV root for lib64 and bin64</span>
cd ..
mkdir lib64
mkdir bin64
<span class="comment">//and copy library localy</span>
cp release_64\lib\release\* lib64
cp release_64\bin\release\* bin64
<span class="comment">//GpuCV will include OpenCV\lib and lib64 in its research path.</span>
<span class="comment">//folder opencv_x64 can be removed now!</span>
</pre></div><h3><a class="anchor" id="COMPILE_GPUCV_SCT__DEPENDENCIES__SUBSECT_OPENCV_LINUX">
Compiling OpenCV 2.1 for Linux</a></h3>
<p>OpenCV 2.1 is not supplied with binary files for Linux, manual compiling is required. Follow this steps (more informations on <a href="http://opencv.willowgarage.com/wiki/InstallGuide" target="blank">OpenCV web page</a>: </p>
<div class="fragment"><pre class="fragment"><span class="comment">//First, setup CMAKE and gstreamer</span>
sudo yum install cmake gstreamer*
<span class="comment">//download OpenCV tar file: http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/</span>

<span class="comment">//untar into a local working folder, ex: /home/MY_NAME/workspace/OpenCV2.1</span>
cd /home/MY_NAME/workspace/OpenCV2.1
mkdir linux_cmake
cd linux_cmake
cmake -D:CMAKE_BUILD_TYPE=RELEASE ../
<span class="preprocessor">#compile</span>
<span class="preprocessor"></span>make
<span class="preprocessor">#install</span>
<span class="preprocessor"></span>sudo make install
<span class="preprocessor">#as root, replace existing OpenCV library by new one</span>
<span class="preprocessor"></span>rm -f /usr/lib64/libcv.so
rm -f /usr/lib64/libcxcore.so
rm -f /usr/lib64/libhighgui.so
rm -f /usr/lib64/libcvaux.so
ln -<a class="code" href="namespaceGCV.html#a6aff5aa0949e0c6043cce849bb5b82de">s</a> /usr/local/lib/libcv.so /usr/lib64/libcv.so
ln -<a class="code" href="namespaceGCV.html#a6aff5aa0949e0c6043cce849bb5b82de">s</a> /usr/local/lib/libcxcore.so /usr/lib64/libcxcore.so
ln -<a class="code" href="namespaceGCV.html#a6aff5aa0949e0c6043cce849bb5b82de">s</a> /usr/local/lib/libhighgui.so /usr/lib64/libhighgui.so
ln -<a class="code" href="namespaceGCV.html#a6aff5aa0949e0c6043cce849bb5b82de">s</a> /usr/local/lib/libcvaux.so /usr/lib64/libcvaux.so

<span class="preprocessor">#to replace back original OpenCV library</span>
<span class="preprocessor"></span>rm /usr/lib64/libcv.so
rm /usr/lib64/libcxcore.so
rm /usr/lib64/libhighgui.so
rm /usr/lib64/libcvaux.so
ln -<a class="code" href="namespaceGCV.html#a6aff5aa0949e0c6043cce849bb5b82de">s</a> /usr/lib64/libcv.so.1 /usr/lib64/libcv.so
ln -<a class="code" href="namespaceGCV.html#a6aff5aa0949e0c6043cce849bb5b82de">s</a> /usr/lib64/libcxcore.so.1 /usr/lib64/libcxcore.so
ln -<a class="code" href="namespaceGCV.html#a6aff5aa0949e0c6043cce849bb5b82de">s</a> /usr/lib64/libhighgui.so.1 /usr/lib64/libhighgui.so
ln -<a class="code" href="namespaceGCV.html#a6aff5aa0949e0c6043cce849bb5b82de">s</a> /usr/lib64/libcvaux.so.1 /usr/lib64/libcvaux.so
</pre></div><h2><a class="anchor" id="COMPILE_GPUCV_SCT__MACOSX">
Compile under Mac OSX</a></h2>
<h2><a class="anchor" id="COMPILE_GPUCV_SCT__PLUGINS">
Compiling third-party plugins</a></h2>
<h2><a class="anchor" id="COMPILE_GPUCV_SCT__FAQ">
Compiling FAQ</a></h2>
<p>See <a class="el" href="group__FAQ__GRP.html#FAQ_COMPILE_GRP">Compiling FAQs</a> </p>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1">
<table border="0" width="100%">
<tr>
<td>
Retrieve latest informations, releases and documentation on <a href="https://picoforge.int-evry.fr/cgi-bin/twiki/view/Gpucv/Web/WebHome">GpuCV website</a>.
</td>
<td width ="50">
</td>
<td>
<address style="text-align: right;"><small>Generated
on Wed Oct 22 20:37:13 2008 for <a href="https://picoforge.int-evry.fr/cgi-bin/twiki/view/Gpucv/Web/WebHome">GpuCV</a> by&nbsp;
<a href="http://www.doxygen.org/index.html"><img
 src="doxygen.png" alt="doxygen" align="middle"
 border="0"></a> 1.5.4 </small></address>
 </td>
 </tr>
 </table>
